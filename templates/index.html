<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>电影数据库查询应用</title>
    <link rel="stylesheet" href="static/css/styles.css">
    <link rel="icon" href="static/imgs/favicon.ico" type="image/x-icon">
</head>

<body>
    <h1>Movie Search</h1>
    <form id="searchForm">
        <input type="text" id="userid" name="userid" placeholder="Enter User ID">
        <button type="submit">Search</button>
    </form>
    <div id="results"></div>

    <!-- Add debugging output -->
    <pre id="debug"></pre>

    <script>
        document.getElementById('searchForm').onsubmit = function (event) {
            event.preventDefault();
            var userid = document.getElementById('userid').value;
            fetch('/search?userid=' + userid)
                .then(function (response) {
                    return response.json();
                })
                .then(function (movies) {
                    // Output debug information
                    document.getElementById('debug').textContent = JSON.stringify(movies, null, 2);

                    var results = document.getElementById('results');
                    results.innerHTML = '';
                    movies.forEach(function (movie) {
                        var div = document.createElement('div');
                        div.innerHTML = 'Title: ' + movie.Title + '<br>Rating: ' + movie.Rating + '<br>Tags: ' + movie.Tags.join(', ');
                        results.appendChild(div);
                    });
                })
                .catch(function (error) {
                    console.error(error);
                });
        };
    </script>
</body>

</html>